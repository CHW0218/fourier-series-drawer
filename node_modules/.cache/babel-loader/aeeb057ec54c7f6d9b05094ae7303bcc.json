{"ast":null,"code":"import { factory } from '../../utils/factory.js';\nvar name = 'kldivergence';\nvar dependencies = ['typed', 'matrix', 'divide', 'sum', 'multiply', 'dotDivide', 'log', 'isNumeric'];\nexport var createKldivergence = /* #__PURE__ */factory(name, dependencies, function (_ref) {\n  var typed = _ref.typed,\n      matrix = _ref.matrix,\n      divide = _ref.divide,\n      sum = _ref.sum,\n      multiply = _ref.multiply,\n      dotDivide = _ref.dotDivide,\n      log = _ref.log,\n      isNumeric = _ref.isNumeric;\n  /**\n     * Calculate the Kullback-Leibler (KL) divergence  between two distributions\n     *\n     * Syntax:\n     *\n     *     math.kldivergence(x, y)\n     *\n     * Examples:\n     *\n     *     math.kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])   //returns 0.24376698773121153\n     *\n     *\n     * @param  {Array | Matrix} q    First vector\n     * @param  {Array | Matrix} p    Second vector\n     * @return {number}              Returns distance between q and p\n     */\n\n  return typed(name, {\n    'Array, Array': function ArrayArray(q, p) {\n      return _kldiv(matrix(q), matrix(p));\n    },\n    'Matrix, Array': function MatrixArray(q, p) {\n      return _kldiv(q, matrix(p));\n    },\n    'Array, Matrix': function ArrayMatrix(q, p) {\n      return _kldiv(matrix(q), p);\n    },\n    'Matrix, Matrix': function MatrixMatrix(q, p) {\n      return _kldiv(q, p);\n    }\n  });\n\n  function _kldiv(q, p) {\n    var plength = p.size().length;\n    var qlength = q.size().length;\n\n    if (plength > 1) {\n      throw new Error('first object must be one dimensional');\n    }\n\n    if (qlength > 1) {\n      throw new Error('second object must be one dimensional');\n    }\n\n    if (plength !== qlength) {\n      throw new Error('Length of two vectors must be equal');\n    } // Before calculation, apply normalization\n\n\n    var sumq = sum(q);\n\n    if (sumq === 0) {\n      throw new Error('Sum of elements in first object must be non zero');\n    }\n\n    var sump = sum(p);\n\n    if (sump === 0) {\n      throw new Error('Sum of elements in second object must be non zero');\n    }\n\n    var qnorm = divide(q, sum(q));\n    var pnorm = divide(p, sum(p));\n    var result = sum(multiply(qnorm, log(dotDivide(qnorm, pnorm))));\n\n    if (isNumeric(result)) {\n      return result;\n    } else {\n      return Number.NaN;\n    }\n  }\n});","map":{"version":3,"names":["factory","name","dependencies","createKldivergence","_ref","typed","matrix","divide","sum","multiply","dotDivide","log","isNumeric","ArrayArray","q","p","_kldiv","MatrixArray","ArrayMatrix","MatrixMatrix","plength","size","length","qlength","Error","sumq","sump","qnorm","pnorm","result","Number","NaN"],"sources":["/Users/ayao/vscode/fourier-series-drawer/node_modules/mathjs/lib/esm/function/probability/kldivergence.js"],"sourcesContent":["import { factory } from '../../utils/factory.js';\nvar name = 'kldivergence';\nvar dependencies = ['typed', 'matrix', 'divide', 'sum', 'multiply', 'dotDivide', 'log', 'isNumeric'];\nexport var createKldivergence = /* #__PURE__ */factory(name, dependencies, _ref => {\n  var {\n    typed,\n    matrix,\n    divide,\n    sum,\n    multiply,\n    dotDivide,\n    log,\n    isNumeric\n  } = _ref;\n\n  /**\n     * Calculate the Kullback-Leibler (KL) divergence  between two distributions\n     *\n     * Syntax:\n     *\n     *     math.kldivergence(x, y)\n     *\n     * Examples:\n     *\n     *     math.kldivergence([0.7,0.5,0.4], [0.2,0.9,0.5])   //returns 0.24376698773121153\n     *\n     *\n     * @param  {Array | Matrix} q    First vector\n     * @param  {Array | Matrix} p    Second vector\n     * @return {number}              Returns distance between q and p\n     */\n  return typed(name, {\n    'Array, Array': function ArrayArray(q, p) {\n      return _kldiv(matrix(q), matrix(p));\n    },\n    'Matrix, Array': function MatrixArray(q, p) {\n      return _kldiv(q, matrix(p));\n    },\n    'Array, Matrix': function ArrayMatrix(q, p) {\n      return _kldiv(matrix(q), p);\n    },\n    'Matrix, Matrix': function MatrixMatrix(q, p) {\n      return _kldiv(q, p);\n    }\n  });\n\n  function _kldiv(q, p) {\n    var plength = p.size().length;\n    var qlength = q.size().length;\n\n    if (plength > 1) {\n      throw new Error('first object must be one dimensional');\n    }\n\n    if (qlength > 1) {\n      throw new Error('second object must be one dimensional');\n    }\n\n    if (plength !== qlength) {\n      throw new Error('Length of two vectors must be equal');\n    } // Before calculation, apply normalization\n\n\n    var sumq = sum(q);\n\n    if (sumq === 0) {\n      throw new Error('Sum of elements in first object must be non zero');\n    }\n\n    var sump = sum(p);\n\n    if (sump === 0) {\n      throw new Error('Sum of elements in second object must be non zero');\n    }\n\n    var qnorm = divide(q, sum(q));\n    var pnorm = divide(p, sum(p));\n    var result = sum(multiply(qnorm, log(dotDivide(qnorm, pnorm))));\n\n    if (isNumeric(result)) {\n      return result;\n    } else {\n      return Number.NaN;\n    }\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}