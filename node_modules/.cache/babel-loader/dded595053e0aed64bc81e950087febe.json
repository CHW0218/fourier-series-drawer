{"ast":null,"code":"import { factory } from '../../utils/factory.js';\nvar name = 'intersect';\nvar dependencies = ['typed', 'config', 'abs', 'add', 'addScalar', 'matrix', 'multiply', 'multiplyScalar', 'divideScalar', 'subtract', 'smaller', 'equalScalar', 'flatten', 'isZero', 'isNumeric'];\nexport var createIntersect = /* #__PURE__ */factory(name, dependencies, function (_ref) {\n  var typed = _ref.typed,\n      config = _ref.config,\n      abs = _ref.abs,\n      add = _ref.add,\n      addScalar = _ref.addScalar,\n      matrix = _ref.matrix,\n      multiply = _ref.multiply,\n      multiplyScalar = _ref.multiplyScalar,\n      divideScalar = _ref.divideScalar,\n      subtract = _ref.subtract,\n      smaller = _ref.smaller,\n      equalScalar = _ref.equalScalar,\n      flatten = _ref.flatten,\n      isZero = _ref.isZero,\n      isNumeric = _ref.isNumeric;\n  /**\n   * Calculates the point of intersection of two lines in two or three dimensions\n   * and of a line and a plane in three dimensions. The inputs are in the form of\n   * arrays or 1 dimensional matrices. The line intersection functions return null\n   * if the lines do not meet.\n   *\n   * Note: Fill the plane coefficients as `x + y + z = c` and not as `x + y + z + c = 0`.\n   *\n   * Syntax:\n   *\n   *    math.intersect(endPoint1Line1, endPoint2Line1, endPoint1Line2, endPoint2Line2)\n   *    math.intersect(endPoint1, endPoint2, planeCoefficients)\n   *\n   * Examples:\n   *\n   *    math.intersect([0, 0], [10, 10], [10, 0], [0, 10])              // Returns [5, 5]\n   *    math.intersect([0, 0, 0], [10, 10, 0], [10, 0, 0], [0, 10, 0])  // Returns [5, 5, 0]\n   *    math.intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])            // Returns [7, -4, 3]\n   *\n   * @param  {Array | Matrix} w   Co-ordinates of first end-point of first line\n   * @param  {Array | Matrix} x   Co-ordinates of second end-point of first line\n   * @param  {Array | Matrix} y   Co-ordinates of first end-point of second line\n   *                              OR Co-efficients of the plane's equation\n   * @param  {Array | Matrix} z   Co-ordinates of second end-point of second line\n   *                              OR undefined if the calculation is for line and plane\n   * @return {Array}              Returns the point of intersection of lines/lines-planes\n   */\n\n  return typed('intersect', {\n    'Array, Array, Array': _AAA,\n    'Array, Array, Array, Array': _AAAA,\n    'Matrix, Matrix, Matrix': function MatrixMatrixMatrix(x, y, plane) {\n      var arr = _AAA(x.valueOf(), y.valueOf(), plane.valueOf());\n\n      return arr === null ? null : matrix(arr);\n    },\n    'Matrix, Matrix, Matrix, Matrix': function MatrixMatrixMatrixMatrix(w, x, y, z) {\n      // TODO: output matrix type should match input matrix type\n      var arr = _AAAA(w.valueOf(), x.valueOf(), y.valueOf(), z.valueOf());\n\n      return arr === null ? null : matrix(arr);\n    }\n  });\n\n  function _AAA(x, y, plane) {\n    x = _coerceArr(x);\n    y = _coerceArr(y);\n    plane = _coerceArr(plane);\n\n    if (!_3d(x)) {\n      throw new TypeError('Array with 3 numbers or BigNumbers expected for first argument');\n    }\n\n    if (!_3d(y)) {\n      throw new TypeError('Array with 3 numbers or BigNumbers expected for second argument');\n    }\n\n    if (!_4d(plane)) {\n      throw new TypeError('Array with 4 numbers expected as third argument');\n    }\n\n    return _intersectLinePlane(x[0], x[1], x[2], y[0], y[1], y[2], plane[0], plane[1], plane[2], plane[3]);\n  }\n\n  function _AAAA(w, x, y, z) {\n    w = _coerceArr(w);\n    x = _coerceArr(x);\n    y = _coerceArr(y);\n    z = _coerceArr(z);\n\n    if (w.length === 2) {\n      if (!_2d(w)) {\n        throw new TypeError('Array with 2 numbers or BigNumbers expected for first argument');\n      }\n\n      if (!_2d(x)) {\n        throw new TypeError('Array with 2 numbers or BigNumbers expected for second argument');\n      }\n\n      if (!_2d(y)) {\n        throw new TypeError('Array with 2 numbers or BigNumbers expected for third argument');\n      }\n\n      if (!_2d(z)) {\n        throw new TypeError('Array with 2 numbers or BigNumbers expected for fourth argument');\n      }\n\n      return _intersect2d(w, x, y, z);\n    } else if (w.length === 3) {\n      if (!_3d(w)) {\n        throw new TypeError('Array with 3 numbers or BigNumbers expected for first argument');\n      }\n\n      if (!_3d(x)) {\n        throw new TypeError('Array with 3 numbers or BigNumbers expected for second argument');\n      }\n\n      if (!_3d(y)) {\n        throw new TypeError('Array with 3 numbers or BigNumbers expected for third argument');\n      }\n\n      if (!_3d(z)) {\n        throw new TypeError('Array with 3 numbers or BigNumbers expected for fourth argument');\n      }\n\n      return _intersect3d(w[0], w[1], w[2], x[0], x[1], x[2], y[0], y[1], y[2], z[0], z[1], z[2]);\n    } else {\n      throw new TypeError('Arrays with two or thee dimensional points expected');\n    }\n  }\n  /** Coerce row and column 2-dim arrays to 1-dim array */\n\n\n  function _coerceArr(arr) {\n    // row matrix\n    if (arr.length === 1) return arr[0]; // column matrix\n\n    if (arr.length > 1 && Array.isArray(arr[0])) {\n      if (arr.every(function (el) {\n        return Array.isArray(el) && el.length === 1;\n      })) return flatten(arr);\n    }\n\n    return arr;\n  }\n\n  function _2d(x) {\n    return x.length === 2 && isNumeric(x[0]) && isNumeric(x[1]);\n  }\n\n  function _3d(x) {\n    return x.length === 3 && isNumeric(x[0]) && isNumeric(x[1]) && isNumeric(x[2]);\n  }\n\n  function _4d(x) {\n    return x.length === 4 && isNumeric(x[0]) && isNumeric(x[1]) && isNumeric(x[2]) && isNumeric(x[3]);\n  }\n\n  function _intersect2d(p1a, p1b, p2a, p2b) {\n    var o1 = p1a;\n    var o2 = p2a;\n    var d1 = subtract(o1, p1b);\n    var d2 = subtract(o2, p2b);\n    var det = subtract(multiplyScalar(d1[0], d2[1]), multiplyScalar(d2[0], d1[1]));\n    if (isZero(det)) return null;\n\n    if (smaller(abs(det), config.epsilon)) {\n      return null;\n    }\n\n    var d20o11 = multiplyScalar(d2[0], o1[1]);\n    var d21o10 = multiplyScalar(d2[1], o1[0]);\n    var d20o21 = multiplyScalar(d2[0], o2[1]);\n    var d21o20 = multiplyScalar(d2[1], o2[0]);\n    var t = divideScalar(addScalar(subtract(subtract(d20o11, d21o10), d20o21), d21o20), det);\n    return add(multiply(d1, t), o1);\n  }\n\n  function _intersect3dHelper(a, b, c, d, e, f, g, h, i, j, k, l) {\n    // (a - b)*(c - d) + (e - f)*(g - h) + (i - j)*(k - l)\n    var add1 = multiplyScalar(subtract(a, b), subtract(c, d));\n    var add2 = multiplyScalar(subtract(e, f), subtract(g, h));\n    var add3 = multiplyScalar(subtract(i, j), subtract(k, l));\n    return addScalar(addScalar(add1, add2), add3);\n  }\n\n  function _intersect3d(x1, y1, z1, x2, y2, z2, x3, y3, z3, x4, y4, z4) {\n    var d1343 = _intersect3dHelper(x1, x3, x4, x3, y1, y3, y4, y3, z1, z3, z4, z3);\n\n    var d4321 = _intersect3dHelper(x4, x3, x2, x1, y4, y3, y2, y1, z4, z3, z2, z1);\n\n    var d1321 = _intersect3dHelper(x1, x3, x2, x1, y1, y3, y2, y1, z1, z3, z2, z1);\n\n    var d4343 = _intersect3dHelper(x4, x3, x4, x3, y4, y3, y4, y3, z4, z3, z4, z3);\n\n    var d2121 = _intersect3dHelper(x2, x1, x2, x1, y2, y1, y2, y1, z2, z1, z2, z1);\n\n    var numerator = subtract(multiplyScalar(d1343, d4321), multiplyScalar(d1321, d4343));\n    var denominator = subtract(multiplyScalar(d2121, d4343), multiplyScalar(d4321, d4321));\n    if (isZero(denominator)) return null;\n    var ta = divideScalar(numerator, denominator);\n    var tb = divideScalar(addScalar(d1343, multiplyScalar(ta, d4321)), d4343);\n    var pax = addScalar(x1, multiplyScalar(ta, subtract(x2, x1)));\n    var pay = addScalar(y1, multiplyScalar(ta, subtract(y2, y1)));\n    var paz = addScalar(z1, multiplyScalar(ta, subtract(z2, z1)));\n    var pbx = addScalar(x3, multiplyScalar(tb, subtract(x4, x3)));\n    var pby = addScalar(y3, multiplyScalar(tb, subtract(y4, y3)));\n    var pbz = addScalar(z3, multiplyScalar(tb, subtract(z4, z3)));\n\n    if (equalScalar(pax, pbx) && equalScalar(pay, pby) && equalScalar(paz, pbz)) {\n      return [pax, pay, paz];\n    } else {\n      return null;\n    }\n  }\n\n  function _intersectLinePlane(x1, y1, z1, x2, y2, z2, x, y, z, c) {\n    var x1x = multiplyScalar(x1, x);\n    var x2x = multiplyScalar(x2, x);\n    var y1y = multiplyScalar(y1, y);\n    var y2y = multiplyScalar(y2, y);\n    var z1z = multiplyScalar(z1, z);\n    var z2z = multiplyScalar(z2, z);\n    var numerator = subtract(subtract(subtract(c, x1x), y1y), z1z);\n    var denominator = subtract(subtract(subtract(addScalar(addScalar(x2x, y2y), z2z), x1x), y1y), z1z);\n    var t = divideScalar(numerator, denominator);\n    var px = addScalar(x1, multiplyScalar(t, subtract(x2, x1)));\n    var py = addScalar(y1, multiplyScalar(t, subtract(y2, y1)));\n    var pz = addScalar(z1, multiplyScalar(t, subtract(z2, z1)));\n    return [px, py, pz]; // TODO: Add cases when line is parallel to the plane:\n    //       (a) no intersection,\n    //       (b) line contained in plane\n  }\n});","map":{"version":3,"names":["factory","name","dependencies","createIntersect","_ref","typed","config","abs","add","addScalar","matrix","multiply","multiplyScalar","divideScalar","subtract","smaller","equalScalar","flatten","isZero","isNumeric","_AAA","_AAAA","MatrixMatrixMatrix","x","y","plane","arr","valueOf","MatrixMatrixMatrixMatrix","w","z","_coerceArr","_3d","TypeError","_4d","_intersectLinePlane","length","_2d","_intersect2d","_intersect3d","Array","isArray","every","el","p1a","p1b","p2a","p2b","o1","o2","d1","d2","det","epsilon","d20o11","d21o10","d20o21","d21o20","t","_intersect3dHelper","a","b","c","d","e","f","g","h","i","j","k","l","add1","add2","add3","x1","y1","z1","x2","y2","z2","x3","y3","z3","x4","y4","z4","d1343","d4321","d1321","d4343","d2121","numerator","denominator","ta","tb","pax","pay","paz","pbx","pby","pbz","x1x","x2x","y1y","y2y","z1z","z2z","px","py","pz"],"sources":["/Users/ayao/vscode/fourier-series-drawer/node_modules/mathjs/lib/esm/function/geometry/intersect.js"],"sourcesContent":["import { factory } from '../../utils/factory.js';\nvar name = 'intersect';\nvar dependencies = ['typed', 'config', 'abs', 'add', 'addScalar', 'matrix', 'multiply', 'multiplyScalar', 'divideScalar', 'subtract', 'smaller', 'equalScalar', 'flatten', 'isZero', 'isNumeric'];\nexport var createIntersect = /* #__PURE__ */factory(name, dependencies, _ref => {\n  var {\n    typed,\n    config,\n    abs,\n    add,\n    addScalar,\n    matrix,\n    multiply,\n    multiplyScalar,\n    divideScalar,\n    subtract,\n    smaller,\n    equalScalar,\n    flatten,\n    isZero,\n    isNumeric\n  } = _ref;\n\n  /**\n   * Calculates the point of intersection of two lines in two or three dimensions\n   * and of a line and a plane in three dimensions. The inputs are in the form of\n   * arrays or 1 dimensional matrices. The line intersection functions return null\n   * if the lines do not meet.\n   *\n   * Note: Fill the plane coefficients as `x + y + z = c` and not as `x + y + z + c = 0`.\n   *\n   * Syntax:\n   *\n   *    math.intersect(endPoint1Line1, endPoint2Line1, endPoint1Line2, endPoint2Line2)\n   *    math.intersect(endPoint1, endPoint2, planeCoefficients)\n   *\n   * Examples:\n   *\n   *    math.intersect([0, 0], [10, 10], [10, 0], [0, 10])              // Returns [5, 5]\n   *    math.intersect([0, 0, 0], [10, 10, 0], [10, 0, 0], [0, 10, 0])  // Returns [5, 5, 0]\n   *    math.intersect([1, 0, 1],  [4, -2, 2], [1, 1, 1, 6])            // Returns [7, -4, 3]\n   *\n   * @param  {Array | Matrix} w   Co-ordinates of first end-point of first line\n   * @param  {Array | Matrix} x   Co-ordinates of second end-point of first line\n   * @param  {Array | Matrix} y   Co-ordinates of first end-point of second line\n   *                              OR Co-efficients of the plane's equation\n   * @param  {Array | Matrix} z   Co-ordinates of second end-point of second line\n   *                              OR undefined if the calculation is for line and plane\n   * @return {Array}              Returns the point of intersection of lines/lines-planes\n   */\n  return typed('intersect', {\n    'Array, Array, Array': _AAA,\n    'Array, Array, Array, Array': _AAAA,\n    'Matrix, Matrix, Matrix': function MatrixMatrixMatrix(x, y, plane) {\n      var arr = _AAA(x.valueOf(), y.valueOf(), plane.valueOf());\n\n      return arr === null ? null : matrix(arr);\n    },\n    'Matrix, Matrix, Matrix, Matrix': function MatrixMatrixMatrixMatrix(w, x, y, z) {\n      // TODO: output matrix type should match input matrix type\n      var arr = _AAAA(w.valueOf(), x.valueOf(), y.valueOf(), z.valueOf());\n\n      return arr === null ? null : matrix(arr);\n    }\n  });\n\n  function _AAA(x, y, plane) {\n    x = _coerceArr(x);\n    y = _coerceArr(y);\n    plane = _coerceArr(plane);\n\n    if (!_3d(x)) {\n      throw new TypeError('Array with 3 numbers or BigNumbers expected for first argument');\n    }\n\n    if (!_3d(y)) {\n      throw new TypeError('Array with 3 numbers or BigNumbers expected for second argument');\n    }\n\n    if (!_4d(plane)) {\n      throw new TypeError('Array with 4 numbers expected as third argument');\n    }\n\n    return _intersectLinePlane(x[0], x[1], x[2], y[0], y[1], y[2], plane[0], plane[1], plane[2], plane[3]);\n  }\n\n  function _AAAA(w, x, y, z) {\n    w = _coerceArr(w);\n    x = _coerceArr(x);\n    y = _coerceArr(y);\n    z = _coerceArr(z);\n\n    if (w.length === 2) {\n      if (!_2d(w)) {\n        throw new TypeError('Array with 2 numbers or BigNumbers expected for first argument');\n      }\n\n      if (!_2d(x)) {\n        throw new TypeError('Array with 2 numbers or BigNumbers expected for second argument');\n      }\n\n      if (!_2d(y)) {\n        throw new TypeError('Array with 2 numbers or BigNumbers expected for third argument');\n      }\n\n      if (!_2d(z)) {\n        throw new TypeError('Array with 2 numbers or BigNumbers expected for fourth argument');\n      }\n\n      return _intersect2d(w, x, y, z);\n    } else if (w.length === 3) {\n      if (!_3d(w)) {\n        throw new TypeError('Array with 3 numbers or BigNumbers expected for first argument');\n      }\n\n      if (!_3d(x)) {\n        throw new TypeError('Array with 3 numbers or BigNumbers expected for second argument');\n      }\n\n      if (!_3d(y)) {\n        throw new TypeError('Array with 3 numbers or BigNumbers expected for third argument');\n      }\n\n      if (!_3d(z)) {\n        throw new TypeError('Array with 3 numbers or BigNumbers expected for fourth argument');\n      }\n\n      return _intersect3d(w[0], w[1], w[2], x[0], x[1], x[2], y[0], y[1], y[2], z[0], z[1], z[2]);\n    } else {\n      throw new TypeError('Arrays with two or thee dimensional points expected');\n    }\n  }\n  /** Coerce row and column 2-dim arrays to 1-dim array */\n\n\n  function _coerceArr(arr) {\n    // row matrix\n    if (arr.length === 1) return arr[0]; // column matrix\n\n    if (arr.length > 1 && Array.isArray(arr[0])) {\n      if (arr.every(el => Array.isArray(el) && el.length === 1)) return flatten(arr);\n    }\n\n    return arr;\n  }\n\n  function _2d(x) {\n    return x.length === 2 && isNumeric(x[0]) && isNumeric(x[1]);\n  }\n\n  function _3d(x) {\n    return x.length === 3 && isNumeric(x[0]) && isNumeric(x[1]) && isNumeric(x[2]);\n  }\n\n  function _4d(x) {\n    return x.length === 4 && isNumeric(x[0]) && isNumeric(x[1]) && isNumeric(x[2]) && isNumeric(x[3]);\n  }\n\n  function _intersect2d(p1a, p1b, p2a, p2b) {\n    var o1 = p1a;\n    var o2 = p2a;\n    var d1 = subtract(o1, p1b);\n    var d2 = subtract(o2, p2b);\n    var det = subtract(multiplyScalar(d1[0], d2[1]), multiplyScalar(d2[0], d1[1]));\n    if (isZero(det)) return null;\n\n    if (smaller(abs(det), config.epsilon)) {\n      return null;\n    }\n\n    var d20o11 = multiplyScalar(d2[0], o1[1]);\n    var d21o10 = multiplyScalar(d2[1], o1[0]);\n    var d20o21 = multiplyScalar(d2[0], o2[1]);\n    var d21o20 = multiplyScalar(d2[1], o2[0]);\n    var t = divideScalar(addScalar(subtract(subtract(d20o11, d21o10), d20o21), d21o20), det);\n    return add(multiply(d1, t), o1);\n  }\n\n  function _intersect3dHelper(a, b, c, d, e, f, g, h, i, j, k, l) {\n    // (a - b)*(c - d) + (e - f)*(g - h) + (i - j)*(k - l)\n    var add1 = multiplyScalar(subtract(a, b), subtract(c, d));\n    var add2 = multiplyScalar(subtract(e, f), subtract(g, h));\n    var add3 = multiplyScalar(subtract(i, j), subtract(k, l));\n    return addScalar(addScalar(add1, add2), add3);\n  }\n\n  function _intersect3d(x1, y1, z1, x2, y2, z2, x3, y3, z3, x4, y4, z4) {\n    var d1343 = _intersect3dHelper(x1, x3, x4, x3, y1, y3, y4, y3, z1, z3, z4, z3);\n\n    var d4321 = _intersect3dHelper(x4, x3, x2, x1, y4, y3, y2, y1, z4, z3, z2, z1);\n\n    var d1321 = _intersect3dHelper(x1, x3, x2, x1, y1, y3, y2, y1, z1, z3, z2, z1);\n\n    var d4343 = _intersect3dHelper(x4, x3, x4, x3, y4, y3, y4, y3, z4, z3, z4, z3);\n\n    var d2121 = _intersect3dHelper(x2, x1, x2, x1, y2, y1, y2, y1, z2, z1, z2, z1);\n\n    var numerator = subtract(multiplyScalar(d1343, d4321), multiplyScalar(d1321, d4343));\n    var denominator = subtract(multiplyScalar(d2121, d4343), multiplyScalar(d4321, d4321));\n    if (isZero(denominator)) return null;\n    var ta = divideScalar(numerator, denominator);\n    var tb = divideScalar(addScalar(d1343, multiplyScalar(ta, d4321)), d4343);\n    var pax = addScalar(x1, multiplyScalar(ta, subtract(x2, x1)));\n    var pay = addScalar(y1, multiplyScalar(ta, subtract(y2, y1)));\n    var paz = addScalar(z1, multiplyScalar(ta, subtract(z2, z1)));\n    var pbx = addScalar(x3, multiplyScalar(tb, subtract(x4, x3)));\n    var pby = addScalar(y3, multiplyScalar(tb, subtract(y4, y3)));\n    var pbz = addScalar(z3, multiplyScalar(tb, subtract(z4, z3)));\n\n    if (equalScalar(pax, pbx) && equalScalar(pay, pby) && equalScalar(paz, pbz)) {\n      return [pax, pay, paz];\n    } else {\n      return null;\n    }\n  }\n\n  function _intersectLinePlane(x1, y1, z1, x2, y2, z2, x, y, z, c) {\n    var x1x = multiplyScalar(x1, x);\n    var x2x = multiplyScalar(x2, x);\n    var y1y = multiplyScalar(y1, y);\n    var y2y = multiplyScalar(y2, y);\n    var z1z = multiplyScalar(z1, z);\n    var z2z = multiplyScalar(z2, z);\n    var numerator = subtract(subtract(subtract(c, x1x), y1y), z1z);\n    var denominator = subtract(subtract(subtract(addScalar(addScalar(x2x, y2y), z2z), x1x), y1y), z1z);\n    var t = divideScalar(numerator, denominator);\n    var px = addScalar(x1, multiplyScalar(t, subtract(x2, x1)));\n    var py = addScalar(y1, multiplyScalar(t, subtract(y2, y1)));\n    var pz = addScalar(z1, multiplyScalar(t, subtract(z2, z1)));\n    return [px, py, pz]; // TODO: Add cases when line is parallel to the plane:\n    //       (a) no intersection,\n    //       (b) line contained in plane\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}