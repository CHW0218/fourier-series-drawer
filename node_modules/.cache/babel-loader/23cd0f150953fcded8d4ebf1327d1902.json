{"ast":null,"code":"import { deepMap } from '../../utils/collection.js';\nimport { factory } from '../../utils/factory.js';\nimport { gammaG, gammaNumber, gammaP } from '../../plain/number/index.js';\nvar name = 'gamma';\nvar dependencies = ['typed', 'config', 'multiplyScalar', 'pow', 'BigNumber', 'Complex'];\nexport var createGamma = /* #__PURE__ */factory(name, dependencies, function (_ref) {\n  var typed = _ref.typed,\n      config = _ref.config,\n      multiplyScalar = _ref.multiplyScalar,\n      pow = _ref.pow,\n      _BigNumber = _ref.BigNumber,\n      _Complex = _ref.Complex;\n  /**\n   * Compute the gamma function of a value using Lanczos approximation for\n   * small values, and an extended Stirling approximation for large values.\n   *\n   * For matrices, the function is evaluated element wise.\n   *\n   * Syntax:\n   *\n   *    math.gamma(n)\n   *\n   * Examples:\n   *\n   *    math.gamma(5)       // returns 24\n   *    math.gamma(-0.5)    // returns -3.5449077018110335\n   *    math.gamma(math.i)  // returns -0.15494982830180973 - 0.49801566811835596i\n   *\n   * See also:\n   *\n   *    combinations, factorial, permutations\n   *\n   * @param {number | Array | Matrix} n   A real or complex number\n   * @return {number | Array | Matrix}    The gamma of `n`\n   */\n\n  return typed(name, {\n    number: gammaNumber,\n    Complex: function Complex(n) {\n      if (n.im === 0) {\n        return this(n.re);\n      } // Lanczos approximation doesn't work well with real part lower than 0.5\n      // So reflection formula is required\n\n\n      if (n.re < 0.5) {\n        // Euler's reflection formula\n        // gamma(1-z) * gamma(z) = PI / sin(PI * z)\n        // real part of Z should not be integer [sin(PI) == 0 -> 1/0 - undefined]\n        // thanks to imperfect sin implementation sin(PI * n) != 0\n        // we can safely use it anyway\n        var _t = new _Complex(1 - n.re, -n.im);\n\n        var r = new _Complex(Math.PI * n.re, Math.PI * n.im);\n        return new _Complex(Math.PI).div(r.sin()).div(this(_t));\n      } // Lanczos approximation\n      // z -= 1\n\n\n      n = new _Complex(n.re - 1, n.im); // x = gammaPval[0]\n\n      var x = new _Complex(gammaP[0], 0); // for (i, gammaPval) in enumerate(gammaP):\n\n      for (var i = 1; i < gammaP.length; ++i) {\n        // x += gammaPval / (z + i)\n        var gammaPval = new _Complex(gammaP[i], 0);\n        x = x.add(gammaPval.div(n.add(i)));\n      } // t = z + gammaG + 0.5\n\n\n      var t = new _Complex(n.re + gammaG + 0.5, n.im); // y = sqrt(2 * pi) * t ** (z + 0.5) * exp(-t) * x\n\n      var twoPiSqrt = Math.sqrt(2 * Math.PI);\n      var tpow = t.pow(n.add(0.5));\n      var expt = t.neg().exp(); // y = [x] * [sqrt(2 * pi)] * [t ** (z + 0.5)] * [exp(-t)]\n\n      return x.mul(twoPiSqrt).mul(tpow).mul(expt);\n    },\n    BigNumber: function BigNumber(n) {\n      if (n.isInteger()) {\n        return n.isNegative() || n.isZero() ? new _BigNumber(Infinity) : bigFactorial(n.minus(1));\n      }\n\n      if (!n.isFinite()) {\n        return new _BigNumber(n.isNegative() ? NaN : Infinity);\n      }\n\n      throw new Error('Integer BigNumber expected');\n    },\n    'Array | Matrix': function ArrayMatrix(n) {\n      return deepMap(n, this);\n    }\n  });\n  /**\n   * Calculate factorial for a BigNumber\n   * @param {BigNumber} n\n   * @returns {BigNumber} Returns the factorial of n\n   */\n\n  function bigFactorial(n) {\n    if (n < 8) {\n      return new _BigNumber([1, 1, 2, 6, 24, 120, 720, 5040][n]);\n    }\n\n    var precision = config.precision + (Math.log(n.toNumber()) | 0);\n\n    var Big = _BigNumber.clone({\n      precision: precision\n    });\n\n    if (n % 2 === 1) {\n      return n.times(bigFactorial(new _BigNumber(n - 1)));\n    }\n\n    var p = n;\n    var prod = new Big(n);\n    var sum = n.toNumber();\n\n    while (p > 2) {\n      p -= 2;\n      sum += p;\n      prod = prod.times(sum);\n    }\n\n    return new _BigNumber(prod.toPrecision(_BigNumber.precision));\n  }\n});","map":{"version":3,"names":["deepMap","factory","gammaG","gammaNumber","gammaP","name","dependencies","createGamma","_ref","typed","config","multiplyScalar","pow","_BigNumber","BigNumber","_Complex","Complex","number","n","im","re","_t","r","Math","PI","div","sin","x","i","length","gammaPval","add","t","twoPiSqrt","sqrt","tpow","expt","neg","exp","mul","isInteger","isNegative","isZero","Infinity","bigFactorial","minus","isFinite","NaN","Error","ArrayMatrix","precision","log","toNumber","Big","clone","times","p","prod","sum","toPrecision"],"sources":["/Users/ayao/vscode/fourier-series-drawer/node_modules/mathjs/lib/esm/function/probability/gamma.js"],"sourcesContent":["import { deepMap } from '../../utils/collection.js';\nimport { factory } from '../../utils/factory.js';\nimport { gammaG, gammaNumber, gammaP } from '../../plain/number/index.js';\nvar name = 'gamma';\nvar dependencies = ['typed', 'config', 'multiplyScalar', 'pow', 'BigNumber', 'Complex'];\nexport var createGamma = /* #__PURE__ */factory(name, dependencies, _ref => {\n  var {\n    typed,\n    config,\n    multiplyScalar,\n    pow,\n    BigNumber: _BigNumber,\n    Complex: _Complex\n  } = _ref;\n\n  /**\n   * Compute the gamma function of a value using Lanczos approximation for\n   * small values, and an extended Stirling approximation for large values.\n   *\n   * For matrices, the function is evaluated element wise.\n   *\n   * Syntax:\n   *\n   *    math.gamma(n)\n   *\n   * Examples:\n   *\n   *    math.gamma(5)       // returns 24\n   *    math.gamma(-0.5)    // returns -3.5449077018110335\n   *    math.gamma(math.i)  // returns -0.15494982830180973 - 0.49801566811835596i\n   *\n   * See also:\n   *\n   *    combinations, factorial, permutations\n   *\n   * @param {number | Array | Matrix} n   A real or complex number\n   * @return {number | Array | Matrix}    The gamma of `n`\n   */\n  return typed(name, {\n    number: gammaNumber,\n    Complex: function Complex(n) {\n      if (n.im === 0) {\n        return this(n.re);\n      } // Lanczos approximation doesn't work well with real part lower than 0.5\n      // So reflection formula is required\n\n\n      if (n.re < 0.5) {\n        // Euler's reflection formula\n        // gamma(1-z) * gamma(z) = PI / sin(PI * z)\n        // real part of Z should not be integer [sin(PI) == 0 -> 1/0 - undefined]\n        // thanks to imperfect sin implementation sin(PI * n) != 0\n        // we can safely use it anyway\n        var _t = new _Complex(1 - n.re, -n.im);\n\n        var r = new _Complex(Math.PI * n.re, Math.PI * n.im);\n        return new _Complex(Math.PI).div(r.sin()).div(this(_t));\n      } // Lanczos approximation\n      // z -= 1\n\n\n      n = new _Complex(n.re - 1, n.im); // x = gammaPval[0]\n\n      var x = new _Complex(gammaP[0], 0); // for (i, gammaPval) in enumerate(gammaP):\n\n      for (var i = 1; i < gammaP.length; ++i) {\n        // x += gammaPval / (z + i)\n        var gammaPval = new _Complex(gammaP[i], 0);\n        x = x.add(gammaPval.div(n.add(i)));\n      } // t = z + gammaG + 0.5\n\n\n      var t = new _Complex(n.re + gammaG + 0.5, n.im); // y = sqrt(2 * pi) * t ** (z + 0.5) * exp(-t) * x\n\n      var twoPiSqrt = Math.sqrt(2 * Math.PI);\n      var tpow = t.pow(n.add(0.5));\n      var expt = t.neg().exp(); // y = [x] * [sqrt(2 * pi)] * [t ** (z + 0.5)] * [exp(-t)]\n\n      return x.mul(twoPiSqrt).mul(tpow).mul(expt);\n    },\n    BigNumber: function BigNumber(n) {\n      if (n.isInteger()) {\n        return n.isNegative() || n.isZero() ? new _BigNumber(Infinity) : bigFactorial(n.minus(1));\n      }\n\n      if (!n.isFinite()) {\n        return new _BigNumber(n.isNegative() ? NaN : Infinity);\n      }\n\n      throw new Error('Integer BigNumber expected');\n    },\n    'Array | Matrix': function ArrayMatrix(n) {\n      return deepMap(n, this);\n    }\n  });\n  /**\n   * Calculate factorial for a BigNumber\n   * @param {BigNumber} n\n   * @returns {BigNumber} Returns the factorial of n\n   */\n\n  function bigFactorial(n) {\n    if (n < 8) {\n      return new _BigNumber([1, 1, 2, 6, 24, 120, 720, 5040][n]);\n    }\n\n    var precision = config.precision + (Math.log(n.toNumber()) | 0);\n\n    var Big = _BigNumber.clone({\n      precision\n    });\n\n    if (n % 2 === 1) {\n      return n.times(bigFactorial(new _BigNumber(n - 1)));\n    }\n\n    var p = n;\n    var prod = new Big(n);\n    var sum = n.toNumber();\n\n    while (p > 2) {\n      p -= 2;\n      sum += p;\n      prod = prod.times(sum);\n    }\n\n    return new _BigNumber(prod.toPrecision(_BigNumber.precision));\n  }\n});"],"mappings":"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"},"metadata":{},"sourceType":"module"}